# @codepunkt/wasm-layout-text

## Key features

This package layouts text and returns the result as an `UInt8Array` of pixels. It supports:

- custom image dimensions
- custom (TrueType) font, font size and color
- text positioning, custom text bounding box
- any combination of vertical and horizontal alignment

## Usage

The package provides a `render` function that returns an `UInt8Array` of pixels:

```js
const fs = requir("fs");
const path = require("path");
const wlt = require("@codepunkt/wasm-layout-text");

const buffer = wlt.render(
  // text
  "Hello world",
  // text size
  64,
  // text color
  wlt.createRgbColor(91, 214, 123),
  // ttf font buffer
  fs.readFileSync(path.join(__dirname, "myfont.ttf")),
  // image dimension
  wtl.createDimension(1200, 630),
  // text bounds
  wtl.createDimensions(1100, 530),
  // text position
  wtl.createPosition(50, 50),
  // text alignment
  wtl.createAlignment(wtl.HorizontalAlign.Left, wtl.VerticalAlign.Top)
);
```

You can then use [Jimp](https://github.com/oliver-moran/jimp) or other image processing libraries to

- load this buffer
- combine it with other buffers (such as a background image or additional text generated by this package)
- save to image file

## Contributing

Contributions are welcome! A JavaScript usage example is available in the `example` directory.

There are a few `make` tasks, most notably:

- `make build`: will build rust code from `./src` to JavaScript code in `./pkg` (using [wasm-pack](https://github.com/rustwasm/wasm-pack))
- `make node`: executes the `example` code with Node.js and uses the local JavaScript package from `.pkg` to render all alignment permutations (expects the `./pkg` folder to exist)
